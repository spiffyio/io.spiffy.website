var Config,Keys,Width;Config={cdn:"//cdn.spiffy.io/static"},Keys={left:37,right:39},Width={xs:320,sm:480,md:768,lg:992,xl:1200};var blank,confirmation,contains,defined,go,handler,high,initModalSize,medium,overrideHandler,preventDefault,quality,recaptchaCallback,refresh;recaptchaCallback=function(){$(".g-recaptcha").each(function(e,n){grecaptcha.render(n,{sitekey:"6LeSviITAAAAAFC9aCd6CAmWFqLoIpzw174jMc-i"})})},preventDefault=function(e){e.preventDefault()},overrideHandler=refresh,handler=function(e){return defined(e)&&(overrideHandler=e),defined(overrideHandler)?overrideHandler:refresh},medium=function(e){quality(e,"m",["a","l"],function(){high(e)})},high=function(e){quality(e,"h",["a","l","m"])},quality=function(e,n,i,t){var a,r,o,d,l;for(null==i&&(i=["a","l","m","h"]),l=e.attr("src"),r=0,o=i.length;o>r;r++)d=i[r],l=l.replace("q="+d,"q="+n);a=new Image,a.onload(function(){e.remove("lazy").attr("src",l),null!=t&&t()}),a.src=l},confirmation=function(e,n){var i;i=$("#confirmation"),i.find(".modal-title").text(e),i.find(".continue").on("click",function(e){return e.preventDefault(),n()}),i.modal("show")},go=function(e){return location.href=e},refresh=function(){return location.reload(!0),window.location=self.location},blank=function(e){return defined(e)?""===e:!0},defined=function(e){return"undefined"==typeof e?!1:"undefined"!==e},contains=function(e,n){var i;return i=e.indexOf(n),i>-1},initModalSize=function(){var e;return e=$(window).height()-125+"px",$(".modal-body").css("max-height",e),e};var base,base1,base2;null==(base=String.prototype).startsWith&&(base.startsWith=function(e){return this.slice(0,e.length)===e}),null==(base1=String.prototype).endsWith&&(base1.endsWith=function(e){return""===e||this.slice(-e.length)===e}),null==(base2=String.prototype).contains&&(base2.contains=function(e){return""===e||this.indexOf(e)>-1}),jQuery.fn.isany=function(e){var n,i,t,a;for(n=$(this[0]),i=0,t=e.length;t>i;i++)if(a=e[i],n.is(a))return!0;return!1},jQuery.fn.spiffyDisable=function(e){var n,i,t,a,r;for(null==e&&(e=!0),n=$(this[0]),r=["input","textarea","select","button"],i=0,a=r.length;a>i;i++)t=r[i],n.find(t).prop("disabled",e);return n},jQuery.fn.spiffyEnable=function(){var e;return e=$(this[0]),e.spiffyDisable(!1)},jQuery.fn.spiffyClear=function(){var e,n,i,t,a;for(e=$(this[0]),a=["input","textarea"],n=0,t=a.length;t>n;n++)i=a[n],e.find(i).val("");return e},jQuery.fn.spiffyValue=function(){var e,n,i,t,a;for(e=$(this[0]),t=["accept","decline","follow","unfollow","friend","unfriend","settings","like","hate","favorite","download","report"],n=0,i=t.length;i>n;n++)if(a=t[n],e.hasClass(a))return a},jQuery.fn.spiffyFormValue=function(e){var n,i;return n=$(this[0]),i=$(n.find("[name="+e+"]")[0]).val()},jQuery.fn.spiffyFormData=function(e){var n,i,t,a,r;for(i=$(this[0]),n={},t=0,a=e.length;a>t;t++)r=e[t],n[r]=i.spiffyFormValue(r);return n},jQuery.fn.spiffySubmit=function(e,n,i,t){var a,r,o,d;r=$(this[0]),d=r.validate(),d.numberOfInvalids()||(a=defined(e.disable)?e.disable:!0,a&&r.spiffyDisable(),0===r.find("img.loading").length&&(r.css("position","relative"),r.append('<img class="loading" src="https://cdn.spiffy.io/static/svg/loading.svg" style="position:absolute;left:0;top:0;right:0;bottom:0;margin:auto;max-width:100%;max-height:100%;z-index:1000;" hidden="true"/>')),r.find("img.loading").slideDown(),o=defined(e.url)?e.url:e,$.ajax({url:o,data:n,dataType:"json",headers:{"X-CSRF-Token":r.data("csrf-token")},type:"POST",success:function(e){i(e),r.find("img.loading").hide(250),a&&r.spiffyEnable,d.resetForm()},error:function(e){var n;return r.find("img.loading").hide(250),a&&r.spiffyEnable,401===e.status?(handler(function(e){$(".modal").modal("hide"),$("meta[name='csrf-header']").attr("content",e.csrf.header),$("meta[name='csrf-token']").attr("content",e.csrf.token),r.submit()}),void $("#signin").modal("show")):(n=e.responseJSON,n.error&&(0===r.find('input[name="error"]').length&&r.append('<input name="error" hidden="true">'),d.showErrors({error:n.error})),void(defined(t)&&t(d,n)))}}))};var closeModal,hAnimate,openModal;Dropzone.options.dzForm={paramName:"file",maxFilesize:2,accept:function(e,n){return n()}},$(document).ready(function(){$("div.header").mouseenter(function(){$(this).is(":hover")&&hAnimate("0")}),$("div.header").mouseleave(function(){var e,n;n=$(this),e=function(){n.is(":hover")||hAnimate("-3em")},setTimeout(e,500)}),$("[data-modal]").click(function(){openModal($(this).data("modal"))}),$("[data-uri]").click(function(){go($(this).data("uri"))}),$("form.login").submit(function(e){var n;preventDefault(e),n=$(this),n.spiffySubmit("/login",$(this).spiffyFormData(["email","password"]),function(){return go(n.data("returnUri"))})}),$("form.register").submit(function(e){var n;preventDefault(e),n=$(this),n.spiffySubmit("/register",$(this).spiffyFormData(["username","email","password"]),function(){return go(n.data("returnUri"))})}),$(".close").click(function(){closeModal()}),$(".modal-overlay").click(function(e){$(e.target).hasClass("modal-overlay")&&closeModal()})}),hAnimate=function(e){$("div.header").find("div.menu").finish().animate({top:e})},openModal=function(e){$('[data-modal-id="'+e+'"]').length&&($("[data-modal-id]").not('[data-modal-id="'+e+'"]').hide(0),$('[data-modal-id="'+e+'"]').show(0),$(".modal-overlay").show(0),$(".modal").slideDown(500))},closeModal=function(){$(".modal").slideUp(250,function(){return $("[data-modal-id]").hide(0),$(".modal-overlay").hide(0)})};
