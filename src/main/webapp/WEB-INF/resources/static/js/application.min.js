var Config,Keys,Width;Config={cdn:"//cdn.spiffy.io/static"},Keys={left:37,right:39},Width={xs:320,sm:480,md:768,lg:992,xl:1200};var blank,confirmation,contains,defined,go,handler,high,initModalSize,medium,overrideHandler,preventDefault,quality,recaptchaCallback,refresh;recaptchaCallback=function(){$(".g-recaptcha").each(function(n,e){grecaptcha.render(e,{sitekey:"6LeSviITAAAAAFC9aCd6CAmWFqLoIpzw174jMc-i"})})},preventDefault=function(n){n.preventDefault()},overrideHandler=refresh,handler=function(n){return defined(n)&&(overrideHandler=n),defined(overrideHandler)?overrideHandler:refresh},medium=function(n){quality(n,"m",["a","l"],function(){high(n)})},high=function(n){quality(n,"h",["a","l","m"])},quality=function(n,e,i,t){var a,r,o,d,l;for(null==i&&(i=["a","l","m","h"]),l=n.attr("src"),r=0,o=i.length;o>r;r++)d=i[r],l=l.replace("q="+d,"q="+e);a=new Image,a.onload(function(){n.remove("lazy").attr("src",l),null!=t&&t()}),a.src=l},confirmation=function(n,e){var i;i=$("#confirmation"),i.find(".modal-title").text(n),i.find(".continue").on("click",function(n){return n.preventDefault(),e()}),i.modal("show")},go=function(n){return location.href=n},refresh=function(){return location.reload(!0),window.location=self.location},blank=function(n){return defined(n)?""===n:!0},defined=function(n){return"undefined"==typeof n?!1:"undefined"!==n},contains=function(n,e){var i;return i=n.indexOf(e),i>-1},initModalSize=function(){var n;return n=$(window).height()-125+"px",$(".modal-body").css("max-height",n),n};var base,base1,base2;null==(base=String.prototype).startsWith&&(base.startsWith=function(n){return this.slice(0,n.length)===n}),null==(base1=String.prototype).endsWith&&(base1.endsWith=function(n){return""===n||this.slice(-n.length)===n}),null==(base2=String.prototype).contains&&(base2.contains=function(n){return""===n||this.indexOf(n)>-1}),jQuery.fn.isany=function(n){var e,i,t,a;for(e=$(this[0]),i=0,t=n.length;t>i;i++)if(a=n[i],e.is(a))return!0;return!1},jQuery.fn.spiffyDisable=function(n){var e,i,t,a,r;for(null==n&&(n=!0),e=$(this[0]),r=["input","textarea","select","button"],i=0,a=r.length;a>i;i++)t=r[i],e.find(t).prop("disabled",n);return e},jQuery.fn.spiffyEnable=function(){var n;return n=$(this[0]),n.spiffyDisable(!1)},jQuery.fn.spiffyClear=function(){var n,e,i,t,a;for(n=$(this[0]),a=["input","textarea"],e=0,t=a.length;t>e;e++)i=a[e],n.find(i).val("");return n},jQuery.fn.spiffyValue=function(){var n,e,i,t,a;for(n=$(this[0]),t=["accept","decline","follow","unfollow","friend","unfriend","settings","like","hate","favorite","download","report"],e=0,i=t.length;i>e;e++)if(a=t[e],n.hasClass(a))return a},jQuery.fn.spiffyFormValue=function(n){var e,i,t;return i=$(this[0]),e=i.find("[name="+n+"]")[0],null==e&&(e=$("[data-form="+i.data("form")+"][name="+n+"]")[0]),null!=e?t=$(e).val():void 0},jQuery.fn.spiffyFormData=function(n){var e,i,t,a,r;for(i=$(this[0]),e={},t=0,a=n.length;a>t;t++)r=n[t],e[r]=i.spiffyFormValue(r);return e},jQuery.fn.spiffySubmit=function(n,e,i,t){var a,r,o,d;r=$(this[0]),d=r.validate(),d.numberOfInvalids()||(a=defined(n.disable)?n.disable:!0,a&&r.spiffyDisable(),0===r.find("img.loading").length&&(r.css("position","relative"),r.append('<img class="loading" src="https://cdn.spiffy.io/static/svg/loading.svg" style="position:absolute;left:0;top:0;right:0;bottom:0;margin:auto;max-width:100%;max-height:100%;z-index:1000;" hidden="true"/>')),r.find("img.loading").slideDown(),o=defined(n.url)?n.url:n,$.ajax({url:o,data:e,dataType:"json",headers:{"X-CSRF-Token":r.data("csrf-token")},type:"POST",success:function(n){i(n),r.find("img.loading").hide(250),a&&r.spiffyEnable,d.resetForm()},error:function(n){var e;return r.find("img.loading").hide(250),a&&r.spiffyEnable,401===n.status?(handler(function(n){$(".modal").modal("hide"),$("meta[name='csrf-header']").attr("content",n.csrf.header),$("meta[name='csrf-token']").attr("content",n.csrf.token),r.submit()}),void $("#signin").modal("show")):(e=n.responseJSON,e.error&&(0===r.find('input[name="error"]').length&&r.append('<input name="error" hidden="true">'),d.showErrors({error:e.error})),void(defined(t)&&t(d,e)))}}))};var closeModal,emptyColumn,fillColumn,fingerprint,hAnimate,openModal,sortColumn;Dropzone.options.dzForm={paramName:"file",maxFilesize:2,accept:function(n,e){e()},success:function(n,e){var i;i=$("form.submit").find('input[name="media"]'),i.val().length?i.val(i.val()+","+e.id):i.val(e.id)}},$(document).ready(function(){var n;$("div.header.hideable").mouseenter(function(){$(this).is(":hover")&&hAnimate("0")}),$("div.header.hideable").mouseleave(function(){var n,e;e=$(this),n=function(){e.is(":hover")||hAnimate("-3em")},setTimeout(n,500)}),$("[data-modal]").click(function(){openModal($(this).data("modal"))}),$("[data-uri]").click(function(){go($(this).data("uri"))}),$('input[name="fingerprint"]')&&(n=fingerprint(),null!=n&&$('input[name="fingerprint"]').each(function(){$(this).val(n)})),$("form.login").submit(function(n){var e;preventDefault(n),e=$(this),e.spiffySubmit("/login",$(this).spiffyFormData(["email","password","fingerprint","g-recaptcha-response"]),function(){return go(e.data("returnUri"))})}),$("form.register").submit(function(n){var e;preventDefault(n),e=$(this),e.spiffySubmit("/register",$(this).spiffyFormData(["username","email","password","fingerprint","g-recaptcha-response"]),function(){return go(e.data("returnUri"))})}),$("form.submit").submit(function(n){var e;preventDefault(n),e=$(this),e.spiffySubmit("/submit",$(this).spiffyFormData(["media","title","description","idempotentId"]),function(){return go("/")})}),$(".close").click(function(){closeModal()}),$(".modal-overlay").click(function(n){$(n.target).hasClass("modal-overlay")&&closeModal()}),$(".col").each(function(n){var e;$(this).attr("data-index",n),e=n,$(this).find(".panel").each(function(n){$(this).attr("data-index",$(".col").length*n+e)})}),$(window).width()<Width.xl&&emptyColumn(2),$(window).width()<Width.md&&emptyColumn(1)}),hAnimate=function(n){$("div.header").find("div.menu").finish().animate({top:n})},openModal=function(n){$('[data-modal-id="'+n+'"]').length&&($("[data-modal-id]").not('[data-modal-id="'+n+'"]').hide(0),$('[data-modal-id="'+n+'"]').show(0),$(".modal-overlay").show(0),$(".modal").slideDown(500))},closeModal=function(){$(".modal").slideUp(250,function(){return $("[data-modal-id]").hide(0),$(".modal-overlay").hide(0)})},fingerprint=function(){var n,e;return n=sessionStorage.getItem("fingerprint"),null!=n?n:(e={excludeAdBlock:!0,excludeAvailableScreenResolution:!0},new Fingerprint2(e).get(function(n){sessionStorage.setItem("fingerprint",n),$('input[name="fingerprint"]').each(function(){$(this).val(n)})}),null)},emptyColumn=function(n){var e,i;e=$('.col[data-index="'+n+'"]'),i=e.find(".panel"),i.length&&(i.each(function(){var e,i;i=$(this),e=i.data("index"),e=1===n||e%2===0?e-1:e-2,i.detach().insertAfter('.panel[data-index="'+e+'"]')}),sortColumn(1))},fillColumn=function(n){var e,i;e=$('.col[data-index="'+n+'"]'),i=e.find(".panel"),i.length||(e=$('.col[data-index!="'+n+'"]'),i=e.find(".panel"),i.each(function(){var e;e=$(this),e.data("index")%3===n&&e.detach().appendTo('.col[data-index="'+n+'"]')}),sortColumn(n))},sortColumn=function(n){var e,i,t;console.log("sort"),e=$('.col[data-index="'+n+'"]'),i=e.find(".panel"),t=i.sort(function(n,e){return $(n).data("index")-$(e).data("index")}),e.html(t)},$(window).resize(function(){var n;n=$(window).width(),n>window.pWidth&&n>=Width.md&&($(".subheader").show(),fillColumn(1)),n<window.pWidth&&n<Width.md&&($(".subheader").hide(),$(".hamburger").removeClass("active"),emptyColumn(1)),n>window.pWidth&&n>=Width.xl&&fillColumn(2),n<window.pWidth&&n<Width.xl&&emptyColumn(2),window.pWidth=n});
